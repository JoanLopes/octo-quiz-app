{% extends "base.html" %}

{% block title %}Login / Register - Octo Quiz{% endblock %}

{% block content %}
<div class="max-w-md mx-[30%] mt-24 bg-white p-8 rounded shadow-md">
  <h1 class="text-2xl font-bold mb-6 text-center text-indigo-700">Octo Quiz</h1>

  <div class="flex mb-6 border-b border-gray-300">
    <button id="loginTab" class="flex-1 py-2 px-4 border-b-2 border-indigo-600 font-semibold text-indigo-700 focus:outline-none">Login</button>
    <button id="registerTab" class="flex-1 py-2 px-4 border-b-2 border-transparent hover:border-indigo-400 focus:outline-none">Register</button>
  </div>

  {% if mensagem %}
    <div class="mb-4 p-3 text-sm text-red-700 bg-red-100 rounded">
      {{ mensagem }}
    </div>
  {% endif %}

  <form id="loginForm" method="post" action="{% url 'home' %}">
    {% csrf_token %}
    <label for="usuario" class="block text-gray-700 mb-2">Username</label>
    <input type="text" name="usuario" id="usuario" required autofocus
      class="w-full mb-4 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500" />

    <label for="senha" class="block text-gray-700 mb-2">Password</label>
    <input type="password" name="senha" id="senha" required
      class="w-full mb-6 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500" />

    <button type="submit"
      class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded transition-colors">
      Login
    </button>
  </form>

  <form id="registerForm" method="post" action="{% url 'register' %}" class="hidden">
    {% csrf_token %}
    <label for="new_username" class="block text-gray-700 mb-2">Username</label>
    <input type="text" name="new_username" id="new_username" required
      class="w-full mb-4 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500" />

    <label for="new_email" class="block text-gray-700 mb-2">Email</label>
    <input type="email" name="new_email" id="new_email" required
      class="w-full mb-4 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500" />

    <label for="new_password" class="block text-gray-700 mb-2">Password</label>
    <input type="password" name="new_password" id="new_password" required
      class="w-full mb-6 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500" />

    <button type="submit"
      class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded transition-colors">
      Register
    </button>
  </form>
</div>

<script>
  const loginTab = document.getElementById('loginTab');
  const registerTab = document.getElementById('registerTab');
  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');

  loginTab.addEventListener('click', () => {
    loginTab.classList.add('border-indigo-600', 'font-semibold', 'text-indigo-700');
    loginTab.classList.remove('border-transparent');
    registerTab.classList.remove('border-indigo-600', 'font-semibold', 'text-indigo-700');
    registerTab.classList.add('border-transparent');
    loginForm.classList.remove('hidden');
    registerForm.classList.add('hidden');
  });

  registerTab.addEventListener('click', () => {
    registerTab.classList.add('border-indigo-600', 'font-semibold', 'text-indigo-700');
    registerTab.classList.remove('border-transparent');
    loginTab.classList.remove('border-indigo-600', 'font-semibold', 'text-indigo-700');
    loginTab.classList.add('border-transparent');
    registerForm.classList.remove('hidden');
    loginForm.classList.add('hidden');
  });
</script>
{% endblock %}
